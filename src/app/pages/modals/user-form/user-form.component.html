<block-ui></block-ui>
<ion-header>
  <ion-toolbar color="dark">
    <ion-title text-center>{{ appName }}</ion-title>
    <ion-icon
      padding-end
      size="large"
      name="locate"
      slot="end"
      color="danger"
      *ngIf="util.isSharing() && action === 'edit'">
    </ion-icon>
  </ion-toolbar>
</ion-header>

<ion-content color="medium">
  <ion-grid>
    <ion-row>
      <ion-col sizeSm="12" sizeMd="12" sizeLg="4" offsetLg="4">
        <div style="padding-top: 20%">
          <ion-card text-center color="light">
            <ion-card-header>
              <ion-card-title text-center>{{user._id ? 'Editando Conta' : 'Nova Conta'}}</ion-card-title>
            </ion-card-header>

            <ion-card-content>
              <ion-item color="light">
                <ion-input
                  email="true"
                  name="email"
                  type="email"
                  placeholder="E-mail"
                  [(ngModel)]="user.email">
                </ion-input>
              </ion-item>
              <ion-item color="light">
                <ion-input
                  name="name"
                  type="text"
                  placeholder="Nome"
                  [(ngModel)]="user.name">
                </ion-input>
              </ion-item>
              <ion-item color="light" *ngIf="action === 'new'">
                <ion-icon slot="end" (click)="showPassword()" [name]="passwordIcon"></ion-icon>
                <ion-input
                  placeholder="Senha"
                  name="password"
                  [type]="passwordType"
                  [(ngModel)]="user.password">
                </ion-input>
              </ion-item>
              <ion-grid>
                <ion-row>
                  <ion-col size="12" padding-vertical>
                    <ion-item color="light" lines="full" *ngIf="user?.onibus?.length" text-center>
                      <ion-label color="secondary">Linha</ion-label>
                    </ion-item>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col justify-content-center size="12">
                    <ion-item-divider *ngFor="let linhas of user.onibus; let i = index" color="light" (press)="showCheckbox(i, linhas)">
                      <ion-item lines="none" color="light">
                        <ion-label text-wrap color="success">{{ linhas.numero }}</ion-label>
                      </ion-item>
                      <ion-item lines="none" color="light">
                        <ion-label color="dark" text-wrap>{{ linhas.descricao }}</ion-label>
                      </ion-item>
                      <ion-item lines="none" color="light" *ngIf="isOption">
                        <ion-checkbox
                          color="secondary"
                          [value]="linhas"
                          (ionChange)="onCheckboxClick($event)">
                        </ion-checkbox>
                      </ion-item>
                    </ion-item-divider>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col [size]="showOptions ? 6 : 12">
                    <ion-button
                      type="button"
                      expand="block"
                      fill="outline"
                      color="secondary"
                      (click)="showLines()"
                      text-wrap>
                      Selecione sua linha
                    </ion-button>
                  </ion-col>
                  <ion-col size="6">
                  <ion-button
                    text-wrap
                    type="button"
                    expand="block"
                    fill="outline"
                    color="danger"
                    *ngIf="showOptions"
                    (click)="deleteBus()">
                    Remover Ã”nibus
                  </ion-button>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer>
  <ion-toolbar color="dark">
    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <ion-button expand="full" fill="clear" (click)="save()">Salvar</ion-button>
        </ion-col>
        <ion-col size="6">
          <ion-button expand="full" fill="clear" color="danger" (click)="closeModal()">Cancelar</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>
